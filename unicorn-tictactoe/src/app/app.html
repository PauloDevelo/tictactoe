<div class="app-container">
  <header class="app-header">
    <h1 class="app-title">ü¶Ñ {{ translationService.translate('app.title') }} üê±</h1>
    <p class="app-subtitle">{{ translationService.translate('app.subtitle') }}</p>
    
    <!-- Back to menu button -->
    <button 
      *ngIf="!showModeSelector" 
      class="back-button"
      (click)="returnToModeSelector()"
      [attr.aria-label]="translationService.translate('app.aria.returnToModeSelector')"
    >
      ‚Üê {{ translationService.translate('app.backToMenu') }}
    </button>
  </header>

  <main class="app-main" role="main" [attr.aria-label]="translationService.translate('app.aria.gameArea')">
    <!-- Connection error notification -->
    <div *ngIf="connectionError" class="error-notification" role="alert">
      <span class="error-icon">‚ö†Ô∏è</span>
      <span class="error-message">{{ connectionError }}</span>
    </div>

    <!-- Online connection status -->
    <div *ngIf="isOnlineMode && !currentRoomId" class="connection-status">
      <span class="status-indicator" [class.connected]="isConnected"></span>
      <span class="status-text">
        {{ isConnected ? translationService.translate('app.connection.connected') : translationService.translate('app.connection.connecting') }}
      </span>
    </div>

    <!-- Game Mode Selector -->
    <app-game-mode-selector
      *ngIf="showModeSelector"
      (modeSelected)="onModeSelected($event)"
    ></app-game-mode-selector>

    <!-- Online Mode: Room Selection -->
    <div *ngIf="isOnlineMode && !currentRoomId && !showModeSelector" class="online-lobby">
      <h2 class="lobby-title">{{ translationService.translate('app.lobby.title') }}</h2>
      
      <div class="lobby-content">
        <!-- Create Room Section -->
        <section class="lobby-section">
          <h3 class="section-title">{{ translationService.translate('app.lobby.createRoom') }}</h3>
          <app-create-room (roomCreated)="onRoomCreated($event)"></app-create-room>
        </section>

        <!-- Room List Section -->
        <section class="lobby-section">
          <h3 class="section-title">{{ translationService.translate('app.lobby.availableRooms') }}</h3>
          <app-room-list></app-room-list>
        </section>
      </div>
    </div>

    <!-- Game Board (Local or Online with Room) -->
    <div *ngIf="!showModeSelector && (!isOnlineMode || currentRoomId)" class="game-area">
      <!-- Online game info -->
      <div *ngIf="isOnlineMode && currentRoomId" class="online-game-info">
        <div class="room-info">
          <span class="room-label">{{ translationService.translate('app.onlineGame.room') }}:</span>
          <span class="room-id">{{ currentRoomId }}</span>
        </div>
        <div class="player-info">
          <span class="player-label">{{ translationService.translate('app.onlineGame.playingAs') }}:</span>
          <span class="player-name">{{ playerName }}</span>
        </div>
        <button class="leave-room-button" (click)="leaveRoom()">
          {{ translationService.translate('app.onlineGame.leaveRoom') }}
        </button>
      </div>

      <!-- Game components -->
      <app-score-board></app-score-board>
      <app-game-board></app-game-board>
      <app-game-controls></app-game-controls>
    </div>
  </main>

  <footer class="app-footer" role="contentinfo">
    <p>{{ translationService.translate('app.footer') }}</p>
  </footer>
</div>
