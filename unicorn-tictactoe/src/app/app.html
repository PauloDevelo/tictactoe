<div class="app-container">
  <header class="app-header">
    <h1 class="app-title">ü¶Ñ Unicorn Tic-Tac-Toe üê±</h1>
    <p class="app-subtitle">A magical game for two players!</p>
    
    <!-- Back to menu button -->
    <button 
      *ngIf="!showModeSelector" 
      class="back-button"
      (click)="returnToModeSelector()"
      aria-label="Return to mode selector"
    >
      ‚Üê Back to Menu
    </button>
  </header>

  <main class="app-main" role="main" aria-label="Game area">
    <!-- Connection error notification -->
    <div *ngIf="connectionError" class="error-notification" role="alert">
      <span class="error-icon">‚ö†Ô∏è</span>
      <span class="error-message">{{ connectionError }}</span>
    </div>

    <!-- Online connection status -->
    <div *ngIf="isOnlineMode && !currentRoomId" class="connection-status">
      <span class="status-indicator" [class.connected]="isConnected"></span>
      <span class="status-text">
        {{ isConnected ? 'Connected to server' : 'Connecting to server...' }}
      </span>
    </div>

    <!-- Game Mode Selector -->
    <app-game-mode-selector
      *ngIf="showModeSelector"
      (modeSelected)="onModeSelected($event)"
    ></app-game-mode-selector>

    <!-- Online Mode: Room Selection -->
    <div *ngIf="isOnlineMode && !currentRoomId && !showModeSelector" class="online-lobby">
      <h2 class="lobby-title">Online Multiplayer Lobby</h2>
      
      <div class="lobby-content">
        <!-- Create Room Section -->
        <section class="lobby-section">
          <h3 class="section-title">Create a New Room</h3>
          <app-create-room (roomCreated)="onRoomCreated($event)"></app-create-room>
        </section>

        <!-- Join Room Section -->
        <section class="lobby-section">
          <h3 class="section-title">Join a Room by ID</h3>
          <app-join-room (roomJoined)="onRoomJoined($event)"></app-join-room>
        </section>

        <!-- Room List Section -->
        <section class="lobby-section">
          <h3 class="section-title">Available Rooms</h3>
          <app-room-list></app-room-list>
        </section>
      </div>
    </div>

    <!-- Game Board (Local or Online with Room) -->
    <div *ngIf="!showModeSelector && (!isOnlineMode || currentRoomId)" class="game-area">
      <!-- Online game info -->
      <div *ngIf="isOnlineMode && currentRoomId" class="online-game-info">
        <div class="room-info">
          <span class="room-label">Room:</span>
          <span class="room-id">{{ currentRoomId }}</span>
        </div>
        <div class="player-info">
          <span class="player-label">Playing as:</span>
          <span class="player-name">{{ playerName }}</span>
        </div>
        <button class="leave-room-button" (click)="leaveRoom()">
          Leave Room
        </button>
      </div>

      <!-- Game components -->
      <app-score-board></app-score-board>
      <app-game-board></app-game-board>
      <app-game-controls></app-game-controls>
    </div>
  </main>

  <footer class="app-footer" role="contentinfo">
    <p>Made with üíñ for magical moments</p>
  </footer>
</div>
