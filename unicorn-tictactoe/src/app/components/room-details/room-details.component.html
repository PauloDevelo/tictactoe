<div class="room-details-overlay" *ngIf="room" (click)="onClose()">
  <div class="room-details-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ room.name }}</h2>
      <button class="close-button" (click)="onClose()">✕</button>
    </div>

    <div class="modal-body">
      <!-- Room Info Section -->
      <div class="info-section">
        <h3>{{ translationService.translate('room.details.roomInformation') }}</h3>
        <div class="info-grid">
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.details.roomId') }}:</span>
            <div class="room-id-container">
              <span class="value room-id">{{ room.id }}</span>
              <button class="copy-button" (click)="copyRoomId()" [title]="translationService.translate('room.details.copyButton')">
                📋
              </button>
              <span class="copied-message" *ngIf="showCopiedMessage">{{ translationService.translate('room.details.copied') }}</span>
            </div>
          </div>
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.details.status') }}:</span>
            <span class="status-badge" [ngClass]="getStatusClass(room.status)">
              {{ translationService.translate('room.list.status.' + room.status) }}
            </span>
          </div>
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.details.created') }}:</span>
            <span class="value">{{ getFormattedDate(room.createdAt) }}</span>
          </div>
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.details.players') }}:</span>
            <span class="value">{{ room.players.length }}/2</span>
          </div>
        </div>
      </div>

      <!-- Players Section -->
      <div class="info-section">
        <h3>{{ translationService.translate('room.details.playersSection') }}</h3>
        <div *ngIf="room.players.length === 0" class="empty-state">
          {{ translationService.translate('room.details.noPlayers') }}
        </div>
        <div *ngIf="room.players.length > 0" class="players-list">
          <div *ngFor="let player of room.players" class="player-card">
            <div class="player-symbol">{{ player.symbol }}</div>
            <div class="player-info">
              <div class="player-name">{{ player.name }}</div>
              <div class="player-id">{{ translationService.translate('room.details.playerId') }}: {{ player.id }}</div>
            </div>
            <div class="player-status">
              <span *ngIf="player.isReady" class="ready-badge">✓ {{ translationService.translate('room.details.ready') }}</span>
              <span *ngIf="!player.isReady" class="not-ready-badge">⏳ {{ translationService.translate('room.details.notReady') }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Game State Section -->
      <div class="info-section">
        <h3>{{ translationService.translate('room.details.gameState') }}</h3>
        <div class="info-grid">
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.details.gameStatus') }}:</span>
            <span class="value">{{ translationService.translate('room.list.status.' + room.gameState.status) }}</span>
          </div>
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.details.currentTurn') }}:</span>
            <span class="value">{{ room.gameState.currentTurn }}</span>
          </div>
          <div class="info-item" *ngIf="room.gameState.status === 'finished'">
            <span class="label">{{ translationService.translate('room.details.winner') }}:</span>
            <span class="value">{{ getWinnerText() }}</span>
          </div>
        </div>

        <!-- Mini Board Preview -->
        <div class="board-preview">
          <div class="mini-board">
            <div *ngFor="let cell of room.gameState.board; let i = index" 
                 class="mini-cell"
                 [class.winning-cell]="room.gameState.winningLine?.includes(i)">
              {{ cell || '' }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button 
        *ngIf="canJoinRoom()" 
        class="action-button join-button" 
        (click)="onJoinRoom()">
        🎮 {{ translationService.translate('room.details.joinButton') }}
      </button>
      <button 
        *ngIf="canDeleteRoom()" 
        class="action-button delete-button" 
        (click)="onDeleteRoom()">
        🗑️ {{ translationService.translate('room.details.deleteButton') }}
      </button>
      <button class="action-button cancel-button" (click)="onClose()">
        {{ translationService.translate('room.details.closeButton') }}
      </button>
    </div>
  </div>
</div>
