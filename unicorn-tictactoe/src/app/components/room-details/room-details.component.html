<div class="room-details-overlay" *ngIf="room" (click)="onClose()">
  <div class="room-details-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ room.name }}</h2>
      <button class="close-button" (click)="onClose()">✕</button>
    </div>

    <div class="modal-body">
      <!-- Room Info Section -->
      <div class="info-section">
        <h3>Room Information</h3>
        <div class="info-grid">
          <div class="info-item">
            <span class="label">Room ID:</span>
            <div class="room-id-container">
              <span class="value room-id">{{ room.id }}</span>
              <button class="copy-button" (click)="copyRoomId()" title="Copy Room ID">
                📋
              </button>
              <span class="copied-message" *ngIf="showCopiedMessage">Copied!</span>
            </div>
          </div>
          <div class="info-item">
            <span class="label">Status:</span>
            <span class="status-badge" [ngClass]="getStatusClass(room.status)">
              {{ room.status }}
            </span>
          </div>
          <div class="info-item">
            <span class="label">Created:</span>
            <span class="value">{{ getFormattedDate(room.createdAt) }}</span>
          </div>
          <div class="info-item">
            <span class="label">Players:</span>
            <span class="value">{{ room.players.length }}/2</span>
          </div>
        </div>
      </div>

      <!-- Players Section -->
      <div class="info-section">
        <h3>Players</h3>
        <div *ngIf="room.players.length === 0" class="empty-state">
          No players yet
        </div>
        <div *ngIf="room.players.length > 0" class="players-list">
          <div *ngFor="let player of room.players" class="player-card">
            <div class="player-symbol">{{ player.symbol }}</div>
            <div class="player-info">
              <div class="player-name">{{ player.name }}</div>
              <div class="player-id">ID: {{ player.id }}</div>
            </div>
            <div class="player-status">
              <span *ngIf="player.isReady" class="ready-badge">✓ Ready</span>
              <span *ngIf="!player.isReady" class="not-ready-badge">⏳ Not Ready</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Game State Section -->
      <div class="info-section">
        <h3>Game State</h3>
        <div class="info-grid">
          <div class="info-item">
            <span class="label">Game Status:</span>
            <span class="value">{{ room.gameState.status }}</span>
          </div>
          <div class="info-item">
            <span class="label">Current Turn:</span>
            <span class="value">{{ room.gameState.currentTurn }}</span>
          </div>
          <div class="info-item" *ngIf="room.gameState.status === 'finished'">
            <span class="label">Winner:</span>
            <span class="value">{{ getWinnerText() }}</span>
          </div>
        </div>

        <!-- Mini Board Preview -->
        <div class="board-preview">
          <div class="mini-board">
            <div *ngFor="let cell of room.gameState.board; let i = index" 
                 class="mini-cell"
                 [class.winning-cell]="room.gameState.winningLine?.includes(i)">
              {{ cell || '' }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button 
        *ngIf="canJoinRoom()" 
        class="action-button join-button" 
        (click)="onJoinRoom()">
        🎮 Join Room
      </button>
      <button 
        *ngIf="canDeleteRoom()" 
        class="action-button delete-button" 
        (click)="onDeleteRoom()">
        🗑️ Delete Room
      </button>
      <button class="action-button cancel-button" (click)="onClose()">
        Close
      </button>
    </div>
  </div>
</div>
