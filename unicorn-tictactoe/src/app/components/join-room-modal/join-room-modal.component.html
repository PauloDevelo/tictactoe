<div 
  *ngIf="isVisible && room" 
  class="modal-overlay" 
  (click)="onBackdropClick($event)"
  role="dialog"
  aria-modal="true"
  aria-labelledby="modal-title"
>
  <div class="modal-container">
    <div class="modal-header">
      <h2 id="modal-title">üéÆ {{ translationService.translate('room.joinRoomModal.title') }}</h2>
      <button 
        type="button"
        class="close-button" 
        (click)="onClose()"
        [disabled]="isJoining"
        [attr.aria-label]="translationService.translate('room.joinRoomModal.aria.closeModal')"
      >
        ‚úï
      </button>
    </div>

    <div class="modal-body">
      <!-- Room Details -->
      <div class="room-details">
        <div class="detail-row">
          <span class="detail-label">{{ translationService.translate('room.joinRoomModal.roomName') }}:</span>
          <span class="detail-value">{{ room.name }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">{{ translationService.translate('room.joinRoomModal.roomId') }}:</span>
          <span class="detail-value room-id">{{ room.id }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">{{ translationService.translate('room.joinRoomModal.players') }}:</span>
          <span class="detail-value">{{ translationService.translate('room.joinRoomModal.playerCount', { current: room.players.length, max: room.maxPlayers }) }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">{{ translationService.translate('room.joinRoomModal.status') }}:</span>
          <span class="detail-value" [class.status-waiting]="room.status === 'waiting'" 
                                      [class.status-ready]="room.status === 'ready'"
                                      [class.status-in-progress]="room.status === 'playing'"
                                      [class.status-finished]="room.status === 'finished'">
            {{ getRoomStatusText() }}
          </span>
        </div>
      </div>

      <!-- Room Full Warning -->
      <div *ngIf="isRoomFull()" class="warning-message">
        ‚ö†Ô∏è {{ translationService.translate('room.joinRoomModal.roomFull') }}
      </div>

      <!-- Player Name Input -->
      <div class="form-group" *ngIf="!isRoomFull()">
        <label for="playerName">{{ translationService.translate('room.joinRoomModal.yourName') }}</label>
        <input
          type="text"
          id="playerName"
          name="playerName"
          [(ngModel)]="playerName"
          [placeholder]="translationService.translate('room.joinRoomModal.playerNamePlaceholder')"
          [disabled]="isJoining"
          class="player-name-input"
          maxlength="20"
          autofocus
          aria-required="true"
          [attr.aria-label]="translationService.translate('room.joinRoomModal.aria.playerNameRequired')"
          aria-describedby="player-name-hint"
        />
        <div id="player-name-hint" class="input-hint">
          {{ translationService.translate('room.joinRoomModal.charactersHint', { count: playerName.length }) }}
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button
        type="button"
        class="cancel-button"
        (click)="onClose()"
        [disabled]="isJoining"
      >
        {{ translationService.translate('common.buttons.cancel') }}
      </button>
      <button
        type="button"
        class="join-button"
        (click)="onJoin()"
        [disabled]="!canJoin()"
        *ngIf="!isRoomFull()"
      >
        {{ isJoining ? '‚è≥ ' + translationService.translate('room.joinRoomModal.joining') : 'üöÄ ' + translationService.translate('room.joinRoomModal.joinButton') }}
      </button>
    </div>
  </div>
</div>
