<div class="room-list-container">
  <div class="room-list-header">
    <h2>üéÆ {{ translationService.translate('room.list.title') }}</h2>
    <button class="refresh-button" (click)="loadRooms()" [disabled]="loading">
      {{ loading ? '‚è≥ ' + translationService.translate('room.list.loading') : 'üîÑ ' + translationService.translate('room.list.refreshButton') }}
    </button>
  </div>

  <div *ngIf="error" class="error-message">
    ‚ö†Ô∏è {{ error }}
  </div>

  <div *ngIf="!loading && rooms.length === 0" class="empty-state">
    <p>{{ translationService.translate('room.list.emptyState') }}</p>
  </div>

  <!-- Available Rooms -->
  <div *ngIf="getAvailableRooms().length > 0" class="room-section">
    <h3>{{ translationService.translate('room.list.availableRooms') }}</h3>
    <div class="room-grid">
      <div *ngFor="let room of getAvailableRooms(); trackBy: trackByRoomId" 
           class="room-card"
           [class.clickable]="!isRoomFull(room)"
           [class.full]="isRoomFull(room)"
           (click)="onRoomClick(room)">
        <div class="room-header">
          <h4>{{ room.name }}</h4>
          <span class="status-badge" [ngClass]="getStatusClass(room.status)">
            {{ translationService.translate('room.list.status.' + room.status) }}
          </span>
        </div>
        <div class="room-info">
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.list.roomId') }}:</span>
            <span class="value">{{ room.id }}</span>
          </div>
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.list.players') }}:</span>
            <span class="value">{{ room.players.length }}/2</span>
          </div>
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.list.availableSlots') }}:</span>
            <span class="value">{{ getAvailableSlots(room) }}</span>
          </div>
        </div>
        <div class="room-players" *ngIf="room.players.length > 0">
          <div *ngFor="let player of room.players" class="player-info">
            <span class="player-symbol">{{ player.symbol }}</span>
            <span class="player-name">{{ player.name }}</span>
            <span class="player-ready" *ngIf="player.isReady">‚úì</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Active Rooms -->
  <div *ngIf="getActiveRooms().length > 0" class="room-section">
    <h3>{{ translationService.translate('room.list.activeGames') }}</h3>
    <div class="room-grid">
      <div *ngFor="let room of getActiveRooms(); trackBy: trackByRoomId" class="room-card active">
        <div class="room-header">
          <h4>{{ room.name }}</h4>
          <span class="status-badge" [ngClass]="getStatusClass(room.status)">
            {{ translationService.translate('room.list.status.' + room.status) }}
          </span>
        </div>
        <div class="room-info">
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.list.roomId') }}:</span>
            <span class="value">{{ room.id }}</span>
          </div>
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.list.currentTurn') }}:</span>
            <span class="value">{{ room.gameState.currentTurn }}</span>
          </div>
        </div>
        <div class="room-players">
          <div *ngFor="let player of room.players" class="player-info">
            <span class="player-symbol">{{ player.symbol }}</span>
            <span class="player-name">{{ player.name }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Finished Rooms -->
  <div *ngIf="getFinishedRooms().length > 0" class="room-section">
    <h3>{{ translationService.translate('room.list.finishedGames') }}</h3>
    <div class="room-grid">
      <div *ngFor="let room of getFinishedRooms(); trackBy: trackByRoomId" class="room-card finished">
        <div class="room-header">
          <h4>{{ room.name }}</h4>
          <span class="status-badge" [ngClass]="getStatusClass(room.status)">
            {{ translationService.translate('room.list.status.' + room.status) }}
          </span>
        </div>
        <div class="room-info">
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.list.roomId') }}:</span>
            <span class="value">{{ room.id }}</span>
          </div>
          <div class="info-item">
            <span class="label">{{ translationService.translate('room.list.winner') }}:</span>
            <span class="value">{{ room.gameState.winner || translationService.translate('room.list.draw') }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
